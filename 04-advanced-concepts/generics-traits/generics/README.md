# Rust æ³›å‹ (Generics) å…¨é¢å­¦ä¹ æŒ‡å—

> åŸºäº https://course.rs/basic/trait/generic.html çš„æ·±åº¦åˆ†æ

## ğŸ“š é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å…¨é¢æ·±å…¥åœ°åˆ†æ Rust æ³›å‹ç³»ç»Ÿï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§åº”ç”¨ï¼Œå¸®åŠ©å¼€å‘è€…æŒæ¡ Rust ç±»å‹ç³»ç»Ÿçš„æ ¸å¿ƒæŠ½è±¡èƒ½åŠ›ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å°†å­¦ä¼šï¼š

- âœ… ç†è§£æ³›å‹çš„åŸºæœ¬æ¦‚å¿µå’Œä¼˜åŠ¿
- âœ… æŒæ¡æ³›å‹å‡½æ•°ã€ç»“æ„ä½“ã€æšä¸¾çš„å®šä¹‰
- âœ… å­¦ä¼šä½¿ç”¨æ³›å‹çº¦æŸ (Trait Bounds)
- âœ… ç†è§£ç”Ÿå‘½å‘¨æœŸå‚æ•°ä¸æ³›å‹çš„å…³ç³»
- âœ… æŒæ¡ const æ³›å‹çš„ä½¿ç”¨
- âœ… ç†è§£æ³›å‹çš„æ€§èƒ½å’Œå•æ€åŒ–
- âœ… å­¦ä¼šåœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨æ³›å‹

## ğŸ“– æ ¸å¿ƒçŸ¥è¯†ç‚¹

### 1. æ³›å‹åŸºç¡€

**æ ¸å¿ƒæ¦‚å¿µï¼š**
- æ³›å‹å…è®¸ä»£ç å¤ç”¨è€Œä¸æŸå¤±ç±»å‹å®‰å…¨
- ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥
- é›¶æˆæœ¬æŠ½è±¡

**åŸºæœ¬è¯­æ³•ï¼š**
```rust
fn largest<T: PartialOrd>(list: &[T]) -> &T {
    // å®ç°
}
```

### 2. æ³›å‹å‡½æ•°

**å®šä¹‰æ³›å‹å‡½æ•°ï¼š**
```rust
fn swap<T>(x: &mut T, y: &mut T) {
    std::mem::swap(x, y);
}
```

**ä½¿ç”¨æ³›å‹çº¦æŸï¼š**
```rust
fn largest<T: PartialOrd + Copy>(list: &[T]) -> T {
    let mut largest = list[0];
    for &item in list {
        if item > largest {
            largest = item;
        }
    }
    largest
}
```

### 3. æ³›å‹ç»“æ„ä½“

**å®šä¹‰ï¼š**
```rust
struct Point<T> {
    x: T,
    y: T,
}
```

**å®ç°æ–¹æ³•ï¼š**
```rust
impl<T> Point<T> {
    fn new(x: T, y: T) -> Self {
        Point { x, y }
    }
}
```

### 4. æ³›å‹æšä¸¾

**å®šä¹‰ï¼š**
```rust
enum Result<T, E> {
    Ok(T),
    Err(E),
}
```

### 5. Trait Bounds

**åŸºæœ¬è¯­æ³•ï¼š**
```rust
fn process<T: Display + Clone>(item: T) {
    println!("{}", item);
    let cloned = item.clone();
}
```

**where å­å¥ï¼š**
```rust
fn complex<T, U>(t: T, u: U) -> i32
where
    T: Display + Clone,
    U: Clone + Debug,
{
    // å®ç°
}
```

### 6. ç”Ÿå‘½å‘¨æœŸå‚æ•°

**æ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸï¼š**
```rust
fn longest<'a, T>(x: &'a T, y: &'a T) -> &'a T
where
    T: PartialOrd,
{
    if x > y { x } else { y }
}
```

### 7. const æ³›å‹

**å®šä¹‰ï¼š**
```rust
struct Array<T, const N: usize> {
    data: [T; N],
}
```

**ä½¿ç”¨ï¼š**
```rust
let arr: Array<i32, 10> = Array {
    data: [0; 10],
};
```

### 8. å•æ€åŒ– (Monomorphization)

**å·¥ä½œåŸç†ï¼š**
- ç¼–è¯‘å™¨ä¸ºæ¯ä¸ªå…·ä½“ç±»å‹ç”Ÿæˆä¸“ç”¨ä»£ç 
- é›¶è¿è¡Œæ—¶å¼€é”€
- å¯èƒ½å¢åŠ ç¼–è¯‘æ—¶é—´å’ŒäºŒè¿›åˆ¶å¤§å°

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# è¿è¡Œå®Œæ•´æ•™ç¨‹
cargo run

# è¿è¡Œæµ‹è¯•
cargo test
```

## ğŸ“– å­¦ä¹ è·¯å¾„

### 1. åŸºç¡€é˜¶æ®µ
- ç†è§£æ³›å‹æ¦‚å¿µ
- æŒæ¡åŸºæœ¬è¯­æ³•
- å­¦ä¹ æ³›å‹å‡½æ•°å’Œç»“æ„ä½“

### 2. è¿›é˜¶é˜¶æ®µ
- æŒæ¡ Trait Bounds
- ç†è§£ç”Ÿå‘½å‘¨æœŸå‚æ•°
- å­¦ä¹  const æ³›å‹

### 3. é«˜çº§é˜¶æ®µ
- ç†è§£å•æ€åŒ–æœºåˆ¶
- ä¼˜åŒ–æ³›å‹æ€§èƒ½
- æ„å»ºå¤æ‚æ³›å‹ç³»ç»Ÿ

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä½¿ç”¨æœ‰æ„ä¹‰çš„æ³›å‹å**ï¼š`T`, `U`, `V` æˆ–æè¿°æ€§åç§°
2. **åˆç†ä½¿ç”¨çº¦æŸ**ï¼šä¸è¦è¿‡åº¦çº¦æŸï¼Œä¹Ÿä¸è¦çº¦æŸä¸è¶³
3. **æ€§èƒ½è€ƒè™‘**ï¼šç†è§£å•æ€åŒ–çš„å½±å“
4. **æ–‡æ¡£å®Œå–„**ï¼šæ³›å‹ä»£ç éœ€è¦æ¸…æ™°çš„æ–‡æ¡£
5. **ç±»å‹æ¨æ–­**ï¼šè®©ç¼–è¯‘å™¨æ¨æ–­ç±»å‹ï¼Œå¿…è¦æ—¶æ˜¾å¼æŒ‡å®š

## ğŸ” å¸¸è§é™·é˜±

1. **è¿‡åº¦æ³›å‹åŒ–**ï¼šä¸éœ€è¦æ³›å‹æ—¶ä¸è¦ä½¿ç”¨
2. **çº¦æŸä¸è¶³**ï¼šç¼ºå°‘å¿…è¦çš„ Trait Bounds
3. **ç”Ÿå‘½å‘¨æœŸæ··æ·†**ï¼šæ³›å‹ä¸ç”Ÿå‘½å‘¨æœŸå‚æ•°æ··æ·†
4. **ç¼–è¯‘æ—¶é—´**ï¼šå¤§é‡æ³›å‹å¯èƒ½å¢åŠ ç¼–è¯‘æ—¶é—´

## ğŸ“š ç›¸å…³èµ„æº

- [Rust Book - Generics](https://doc.rust-lang.org/book/ch10-00-generics.html)
- [The Rust Reference - Generics](https://doc.rust-lang.org/reference/items/generics.html)
- [Const Generics RFC](https://github.com/rust-lang/rfcs/blob/master/text/2000-const-generics.md)

## ğŸ¯ æ€»ç»“

æ³›å‹æ˜¯ Rust ç±»å‹ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œæä¾›äº†å¼ºå¤§çš„æŠ½è±¡èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒé›¶æˆæœ¬æŠ½è±¡çš„æ€§èƒ½ç‰¹æ€§ã€‚

---

**Happy Generic Programming! ğŸ¦€**

