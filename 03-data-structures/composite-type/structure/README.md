# Rust ç»“æ„ä½“å®Œæ•´æ•™ç¨‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªå…¨é¢çš„ Rust ç»“æ„ä½“å­¦ä¹ æ•™ç¨‹ï¼ŒåŸºäº [Rustè¯­è¨€åœ£ç»](https://course.rs/basic/compound-type/struct.html) çš„å†…å®¹ï¼Œæä¾›äº†è¯¦ç»†çš„ç†è®ºè®²è§£å’Œä¸°å¯Œçš„å®è·µç»ƒä¹ ã€‚

## ğŸ“š é¡¹ç›®ç»“æ„

```
structure/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs                    # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ struct_comprehensive.rs    # ç»“æ„ä½“æ•™ç¨‹æ¨¡å—
â”‚   â””â”€â”€ exercises.rs               # ç»“æ„ä½“ç»ƒä¹ æ¨¡å—
â”œâ”€â”€ Cargo.toml                     # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                      # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ å­¦ä¹ å†…å®¹

### ç¬¬ä¸€éƒ¨åˆ†ï¼šç»“æ„ä½“æ•™ç¨‹ (`struct_comprehensive.rs`)

1. **åŸºç¡€ç»“æ„ä½“**
   - ç»“æ„ä½“å®šä¹‰å’Œå®ä¾‹åŒ–
   - å­—æ®µåˆå§‹åŒ–ç®€å†™è¯­æ³•
   - ç»“æ„ä½“æ›´æ–°è¯­æ³•
   - ç»“æ„ä½“æ‰€æœ‰æƒ

2. **å…ƒç»„ç»“æ„ä½“**
   - å…ƒç»„ç»“æ„ä½“å®šä¹‰
   - æ–°ç±»å‹æ¨¡å¼ (Newtype Pattern)
   - é¢œè‰²å’Œåæ ‡ç³»ç»Ÿç¤ºä¾‹

3. **å•å…ƒç»“æ„ä½“**
   - å•å…ƒç»“æ„ä½“çš„ç”¨é€”
   - æ ‡è®°ç±»å‹çš„å®ç°

4. **ç»“æ„ä½“æ–¹æ³•**
   - `impl` å—çš„ä½¿ç”¨
   - `self`ã€`&self`ã€`&mut self` å‚æ•°
   - æ–¹æ³•é“¾è°ƒç”¨

5. **å…³è”å‡½æ•°**
   - æ„é€ å‡½æ•°æ¨¡å¼
   - é™æ€æ–¹æ³•çš„å®ç°

6. **æ³›å‹ç»“æ„ä½“**
   - æ³›å‹å‚æ•°çš„ä½¿ç”¨
   - ç±»å‹çº¦æŸå’Œç”Ÿå‘½å‘¨æœŸ

7. **ç»“æ„ä½“ä¸æ‰€æœ‰æƒ**
   - å€Ÿç”¨å’Œç§»åŠ¨è¯­ä¹‰
   - ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨

8. **Trait å®ç°**
   - ä¸ºç»“æ„ä½“å®ç°æ ‡å‡† trait
   - è‡ªå®šä¹‰ trait çš„å®šä¹‰å’Œå®ç°

9. **è°ƒè¯•å’Œæ ¼å¼åŒ–**
   - `Debug` trait çš„ä½¿ç”¨
   - è‡ªå®šä¹‰ `Display` å®ç°

10. **å®é™…åº”ç”¨æ¡ˆä¾‹**
    - å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ
    - å®Œæ•´çš„ CRUD æ“ä½œ

### ç¬¬äºŒéƒ¨åˆ†ï¼šç»“æ„ä½“ç»ƒä¹  (`exercises.rs`)

1. **ç»ƒä¹ 1ï¼šåŸºç¡€ç»“æ„ä½“æ“ä½œ**
   - äººå‘˜ä¿¡æ¯ç®¡ç†
   - BMI è®¡ç®—å™¨

2. **ç»ƒä¹ 2ï¼šå…ƒç»„ç»“æ„ä½“å’Œæ–°ç±»å‹**
   - æ¸©åº¦è½¬æ¢ç³»ç»Ÿ
   - RGB é¢œè‰²å¤„ç†

3. **ç»ƒä¹ 3ï¼šæ³›å‹å®¹å™¨**
   - é€šç”¨å®¹å™¨å®ç°
   - ç±»å‹çº¦æŸçš„åº”ç”¨

4. **ç»ƒä¹ 4ï¼šç”Ÿå‘½å‘¨æœŸå’Œå€Ÿç”¨**
   - æ–‡æœ¬åˆ†æå™¨
   - å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†

5. **ç»ƒä¹ 5ï¼šTrait å®ç°å’Œå¤šæ€**
   - å‡ ä½•å›¾å½¢ç³»ç»Ÿ
   - å¤šæ€å’ŒåŠ¨æ€åˆ†å‘

6. **ç»ƒä¹ 6ï¼šå¤æ‚åº”ç”¨**
   - å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ
   - å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘å®ç°

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œæ•™ç¨‹

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd structure

# è¿è¡Œå®Œæ•´æ•™ç¨‹
cargo run

# è¿è¡Œæµ‹è¯•
cargo test

# æŸ¥çœ‹æ–‡æ¡£
cargo doc --open
```

### å­¦ä¹ å»ºè®®

1. **æŒ‰é¡ºåºå­¦ä¹ **ï¼šå…ˆé˜…è¯»æ•™ç¨‹ä»£ç ï¼Œç†è§£æ¦‚å¿µï¼Œå†åšç»ƒä¹ 
2. **åŠ¨æ‰‹å®è·µ**ï¼šä¿®æ”¹ä»£ç ï¼Œè§‚å¯Ÿç»“æœï¼ŒåŠ æ·±ç†è§£
3. **è¿è¡Œæµ‹è¯•**ï¼šç¡®ä¿ä»£ç æ­£ç¡®æ€§ï¼Œç†è§£æµ‹è¯•ç”¨ä¾‹
4. **æ‰©å±•ç»ƒä¹ **ï¼šåŸºäºç°æœ‰ä»£ç ï¼Œå®ç°æ›´å¤šåŠŸèƒ½

## ğŸ“– æ ¸å¿ƒçŸ¥è¯†ç‚¹

### ç»“æ„ä½“å®šä¹‰

```rust
// æ™®é€šç»“æ„ä½“
struct User {
    username: String,
    email: String,
    age: u32,
    active: bool,
}

// å…ƒç»„ç»“æ„ä½“
struct Color(i32, i32, i32);
struct Point(i32, i32, i32);

// å•å…ƒç»“æ„ä½“
struct AlwaysEqual;
```

### ç»“æ„ä½“å®ä¾‹åŒ–

```rust
// åŸºæœ¬å®ä¾‹åŒ–
let user1 = User {
    email: String::from("someone@example.com"),
    username: String::from("someusername123"),
    active: true,
    age: 1,
};

// å­—æ®µåˆå§‹åŒ–ç®€å†™
let username = String::from("someusername123");
let email = String::from("someone@example.com");
let user2 = User {
    username,
    email,
    active: true,
    age: 1,
};

// ç»“æ„ä½“æ›´æ–°è¯­æ³•
let user3 = User {
    email: String::from("another@example.com"),
    ..user1
};
```

### æ–¹æ³•å’Œå…³è”å‡½æ•°

```rust
impl Rectangle {
    // å…³è”å‡½æ•°ï¼ˆæ„é€ å‡½æ•°ï¼‰
    fn new(width: u32, height: u32) -> Rectangle {
        Rectangle { width, height }
    }
    
    // æ–¹æ³•
    fn area(&self) -> u32 {
        self.width * self.height
    }
    
    // å¯å˜æ–¹æ³•
    fn scale(&mut self, factor: u32) {
        self.width *= factor;
        self.height *= factor;
    }
}
```

### æ³›å‹ç»“æ„ä½“

```rust
struct Point<T> {
    x: T,
    y: T,
}

impl<T> Point<T> {
    fn new(x: T, y: T) -> Self {
        Point { x, y }
    }
}

// å¸¦çº¦æŸçš„æ³›å‹
impl<T: std::fmt::Display> Point<T> {
    fn display(&self) {
        println!("({}, {})", self.x, self.y);
    }
}
```

## ğŸ”§ é«˜çº§ç‰¹æ€§

### ç”Ÿå‘½å‘¨æœŸ

```rust
struct ImportantExcerpt<'a> {
    part: &'a str,
}

impl<'a> ImportantExcerpt<'a> {
    fn level(&self) -> i32 {
        3
    }
    
    fn announce_and_return_part(&self, announcement: &str) -> &str {
        println!("Attention please: {}", announcement);
        self.part
    }
}
```

### Trait å®ç°

```rust
// è‡ªåŠ¨æ´¾ç”Ÿ
#[derive(Debug, Clone, PartialEq)]
struct Point {
    x: i32,
    y: i32,
}

// æ‰‹åŠ¨å®ç°
impl std::fmt::Display for Point {
    fn fmt(&self, f: &mut std::fmt::Formatter) -> std::fmt::Result {
        write!(f, "({}, {})", self.x, self.y)
    }
}
```

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- âœ… ç†Ÿç»ƒå®šä¹‰å’Œä½¿ç”¨å„ç§ç±»å‹çš„ç»“æ„ä½“
- âœ… ç†è§£ç»“æ„ä½“çš„æ‰€æœ‰æƒå’Œå€Ÿç”¨æœºåˆ¶
- âœ… å®ç°ç»“æ„ä½“çš„æ–¹æ³•å’Œå…³è”å‡½æ•°
- âœ… ä½¿ç”¨æ³›å‹å’Œç”Ÿå‘½å‘¨æœŸå‚æ•°
- âœ… ä¸ºç»“æ„ä½“å®ç°å„ç§ trait
- âœ… è®¾è®¡å’Œå®ç°å¤æ‚çš„æ•°æ®ç»“æ„
- âœ… åº”ç”¨ç»“æ„ä½“è§£å†³å®é™…é—®é¢˜

## ğŸ“ ç»ƒä¹ å»ºè®®

1. **ä¿®æ”¹ç°æœ‰ä»£ç **ï¼šå°è¯•æ·»åŠ æ–°å­—æ®µã€æ–°æ–¹æ³•
2. **å®ç°æ–°åŠŸèƒ½**ï¼šåŸºäºç°æœ‰ç»“æ„ä½“æ‰©å±•åŠŸèƒ½
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šæ€è€ƒå¦‚ä½•ä¼˜åŒ–å†…å­˜ä½¿ç”¨å’Œæ€§èƒ½
4. **é”™è¯¯å¤„ç†**ï¼šæ·»åŠ æ›´å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
5. **æ–‡æ¡£ç¼–å†™**ï¼šä¸ºä»£ç æ·»åŠ è¯¦ç»†çš„æ–‡æ¡£æ³¨é‡Š

## ğŸ”— ç›¸å…³èµ„æº

- [Rust å®˜æ–¹æ–‡æ¡£ - ç»“æ„ä½“](https://doc.rust-lang.org/book/ch05-00-structs.html)
- [Rust è¯­è¨€åœ£ç» - ç»“æ„ä½“](https://course.rs/basic/compound-type/struct.html)
- [Rust By Example - ç»“æ„ä½“](https://doc.rust-lang.org/rust-by-example/custom_types/structs.html)

---

**Happy Coding! ğŸ¦€**